<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../assets/img/logo.png" type="image/png">
    <title>Laboratorio Interactivo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="../assets/js/tailwind-config.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body class="overflow-x-hidden">

    <!-- CONTENEDOR DE LA SIMULACIÓN (Recibe los efectos de daño) -->
    <div id="simulation-container" class="relative w-full min-h-screen transition-all duration-500">
    <!-- FONDO DE ECOSISTEMA MARINO DINÁMICO - ESTILO CARIBE'O -->
    <div id="ocean-bg" class="fixed inset-0 z-[-1]">
        <canvas id="ocean-canvas" class="w-full h-full"></canvas>
        <div class="absolute inset-0 bg-gradient-to-t from-caribbean-blue via-tropical-teal to-ocean-green/30"></div>
        <div class="absolute inset-0 bg-gradient-to-b from-transparent via-caribbean-blue/20 to-deep-abyss/60"></div>
        <!-- Elementos visuales del océano caribeño -->
        <div id="coral-reef" class="absolute bottom-0 left-0 w-full h-32 opacity-20">
            <svg viewBox="0 0 1200 200" class="w-full h-full">
                <defs>
                    <linearGradient id="coralGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#FF6B6B;stop-opacity:1" />
                        <stop offset="50%" style="stop-color:#4ECDC4;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#45B7D1;stop-opacity:1" />
                    </linearGradient>
                </defs>
                <path d="M0,200 Q300,100 600,150 T1200,200 L1200,200 L0,200 Z" fill="url(#coralGradient)" opacity="0.3"/>
                <circle cx="200" cy="150" r="8" fill="#FF6B6B" opacity="0.6"/>
                <circle cx="400" cy="130" r="6" fill="#4ECDC4" opacity="0.6"/>
                <circle cx="600" cy="140" r="7" fill="#45B7D1" opacity="0.6"/>
                <circle cx="800" cy="135" r="5" fill="#FF6B6B" opacity="0.6"/>
                <circle cx="1000" cy="145" r="6" fill="#4ECDC4" opacity="0.6"/>
            </svg>
        </div>
    </div>

    <!-- PARTÍCULAS DE CONTAMINACI"N -->
    <div id="particles" class="fixed inset-0 z-[-1] pointer-events-none"></div>

    <!-- CAPA DE INMERSIÓN (Vignette y efectos) -->
    <div id="immersion-overlay" class="fixed inset-0 z-40 pointer-events-none transition-all duration-1000 mix-blend-multiply"></div>

    <!-- NAVBAR FLOTANTE -->
    <nav class="fixed top-6 left-1/2 -translate-x-1/2 z-50 w-[95%] max-w-[1000px]">
        <div class="bg-blue-900/40 backdrop-blur-xl border-2 border-white/20 rounded-full p-3 flex items-center justify-between shadow-[0_8px_32px_rgba(0,0,0,0.3)] transition-all duration-300 hover:bg-blue-900/60 hover:scale-[1.02]">
            <a href="../index.html" class="pl-6 text-xl font-bold tracking-tighter text-white hover:opacity-80 transition-opacity whitespace-nowrap">
                MARES <span class="text-primary">VIVOS</span>
            </a>
            <div class="hidden md:flex items-center bg-white/5 rounded-full px-1 py-1 border border-white/5">
                <a href="laboratorio.html" class="nav-flash active-nav flex items-center gap-2 px-4 py-3 text-sm font-medium text-slate-300 hover:text-white transition-all rounded-full">
                    <span class="material-symbols-outlined text-lg">science</span> Laboratorio
                </a>
                <a href="atlas.html" class="nav-flash flex items-center gap-2 px-4 py-3 text-sm font-medium text-slate-300 hover:text-white transition-all rounded-full">
                    <span class="material-symbols-outlined text-lg">analytics</span> Atlas
                </a>
                <a href="especies.html" class="nav-flash flex items-center gap-2 px-4 py-3 text-sm font-medium text-slate-300 hover:text-white transition-all rounded-full">
                    <span class="material-symbols-outlined text-lg">pets</span> Especies
                </a>
                <a href="guia.html" class="nav-flash flex items-center gap-2 px-4 py-3 text-sm font-medium text-slate-300 hover:text-white transition-all rounded-full">
                    <span class="material-symbols-outlined text-lg">checklist</span> Guía
                </a>
                <a href="compromiso.html" class="nav-flash flex items-center gap-2 px-4 py-3 text-sm font-medium text-slate-300 hover:text-white transition-all rounded-full">
                    <span class="material-symbols-outlined text-lg">handshake</span> Compromiso
                </a>
                <a href="fuentes.html" class="nav-flash flex items-center gap-2 px-4 py-3 text-sm font-medium text-slate-300 hover:text-white transition-all rounded-full">
                    <span class="material-symbols-outlined text-lg">menu_book</span> Fuentes
                </a>
            </div>
            <div class="flex items-center gap-2">
                <button onclick="document.getElementById('mobile-menu').classList.toggle('hidden')" class="md:hidden text-white p-2 hover:bg-white/10 rounded-full transition-colors">
                    <span class="material-symbols-outlined">menu</span>
                </button>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden mt-2 bg-blue-900/90 backdrop-blur-xl border-2 border-white/20 rounded-3xl p-4 flex flex-col gap-2 shadow-2xl">
            <a href="laboratorio.html" class="nav-flash active-nav flex items-center gap-3 text-slate-300 hover:text-white px-4 py-3 rounded-xl transition-all text-sm font-medium">
                <span class="material-symbols-outlined">science</span> Laboratorio
            </a>
            <a href="atlas.html" class="nav-flash flex items-center gap-3 text-slate-300 hover:text-white px-4 py-3 rounded-xl transition-all text-sm font-medium">
                <span class="material-symbols-outlined">analytics</span> Atlas
            </a>
            <a href="especies.html" class="nav-flash flex items-center gap-3 text-slate-300 hover:text-white px-4 py-3 rounded-xl transition-all text-sm font-medium">
                <span class="material-symbols-outlined">pets</span> Especies
            </a>
            <a href="guia.html" class="nav-flash flex items-center gap-3 text-slate-300 hover:text-white px-4 py-3 rounded-xl transition-all text-sm font-medium">
                <span class="material-symbols-outlined">checklist</span> Guía
            </a>
            <a href="compromiso.html" class="nav-flash flex items-center gap-3 text-slate-300 hover:text-white px-4 py-3 rounded-xl transition-all text-sm font-medium">
                <span class="material-symbols-outlined">handshake</span> Compromiso
            </a>
            <a href="fuentes.html" class="nav-flash flex items-center gap-3 text-slate-300 hover:text-white px-4 py-3 rounded-xl transition-all text-sm font-medium">
                <span class="material-symbols-outlined">menu_book</span> Fuentes
            </a>
        </div>
    </nav>

    <!-- LABORATORIO INTERACTIVO INMERSIVO (HUD LAYOUT) -->
    <div id="hud-container" class="relative z-10 w-full min-h-screen flex flex-col pointer-events-none">
        
        <!-- Header del Lab (Título) -->
        <div class="pt-24 pb-4 text-center pointer-events-auto">
            <span class="text-primary font-bold tracking-[0.3em] uppercase text-xs shadow-black drop-shadow-md">Panel de Control Ambiental</span>
            <h1 class="text-4xl md:text-6xl lg:text-8xl leading-[1.15] px-4 pb-2 font-black tracking-tighter text-white drop-shadow-xl mt-5 mb-6">¿QUÉ PASARÍA <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary to-cyan-300 inline-block pr-3">SI...?</span></h1>
            <p class="text-slate-200 mt-3 max-w-2xl mx-auto text-xl leading-relaxed">Usa los botones de la mesa de control para experimentar. Activa una amenaza y observa el impacto, luego aplica una solución para restaurar el océano.</p>
        </div>

        <!-- Espacio flexible para empujar controles abajo -->
        <div class="flex-1 min-h-[250px]"></div>

        <!-- MESA DE CONTROL (Bottom Layout) -->
        <div class="relative z-20 px-4 pb-8 w-full pointer-events-none">
            <div class="flex flex-col xl:flex-row items-end justify-center gap-6 max-w-[1800px] mx-auto pointer-events-auto bg-slate-900/60 backdrop-blur-2xl p-6 md:p-10 rounded-[3rem] border border-white/10 shadow-[0_0_100px_rgba(56,189,248,0.2)] relative overflow-hidden">
                
                <!-- Efectos de Fondo de la Mesa de Control -->
                <div class="absolute top-0 left-1/2 -translate-x-1/2 w-3/4 h-[1px] bg-gradient-to-r from-transparent via-cyan-400 to-transparent shadow-[0_0_15px_rgba(34,211,238,0.8)]"></div>
                <div class="absolute bottom-0 inset-x-0 h-32 bg-gradient-to-t from-cyan-500/5 to-transparent pointer-events-none"></div>
                <div class="absolute inset-0 bg-gradient-to-b from-white/5 to-transparent opacity-30 pointer-events-none"></div>
            
            <!-- PANEL IZQUIERDO: AMENAZAS -->
            <div id="negative-card" class="glass-card w-full max-w-2xl p-4 rounded-3xl group/panel transition-all duration-300 hover:border-red-500/30">
                <div class="flex items-center justify-between mb-3 border-b border-white/5 pb-2 px-2">
                    <div class="flex items-center gap-2">
                        <span class="material-symbols-outlined text-red-400">warning</span>
                        <h3 class="font-bold text-white leading-tight">Amenazas</h3>
                    </div>
                    <span class="text-[10px] text-red-300/70 uppercase tracking-wider font-bold">Input</span>
                </div>
                
                <!-- Grid Horizontal de Botones -->
                <div class="grid grid-cols-3 sm:grid-cols-5 gap-2">
                    <!-- Botones compactos -->
                    <button id="btn-threat-basura" class="flex flex-col items-center justify-center gap-2 p-2 rounded-xl bg-white/5 hover:bg-red-500/20 border border-transparent hover:border-red-500/30 transition-all group h-24" onclick="applyDegradation('basura')">
                        <span class="material-symbols-outlined text-3xl text-slate-400 group-hover:text-red-400 group-hover:scale-110 transition-transform">delete</span>
                        <span class="text-xs font-bold text-slate-300 group-hover:text-white text-center leading-tight">Plástico</span>
                    </button>
                    <button id="btn-threat-reciclaje" class="flex flex-col items-center justify-center gap-2 p-2 rounded-xl bg-white/5 hover:bg-red-500/20 border border-transparent hover:border-red-500/30 transition-all group h-24" onclick="applyDegradation('reciclaje')">
                        <span class="material-symbols-outlined text-3xl text-slate-400 group-hover:text-red-400 group-hover:scale-110 transition-transform">thermostat</span>
                        <span class="text-xs font-bold text-slate-300 group-hover:text-white text-center leading-tight">Calor</span>
                    </button>
                    <button id="btn-threat-pesca" class="flex flex-col items-center justify-center gap-2 p-2 rounded-xl bg-white/5 hover:bg-red-500/20 border border-transparent hover:border-red-500/30 transition-all group h-24" onclick="applyDegradation('pesca')">
                        <span class="material-symbols-outlined text-3xl text-slate-400 group-hover:text-red-400 group-hover:scale-110 transition-transform">phishing</span>
                        <span class="text-xs font-bold text-slate-300 group-hover:text-white text-center leading-tight">Pesca</span>
                    </button>
                    <button id="btn-threat-petroleo" class="flex flex-col items-center justify-center gap-2 p-2 rounded-xl bg-white/5 hover:bg-red-500/20 border border-transparent hover:border-red-500/30 transition-all group h-24" onclick="applyDegradation('petroleo')">
                        <span class="material-symbols-outlined text-3xl text-slate-400 group-hover:text-red-400 group-hover:scale-110 transition-transform">oil_barrel</span>
                        <span class="text-xs font-bold text-slate-300 group-hover:text-white text-center leading-tight">Petróleo</span>
                    </button>
                    <button id="btn-threat-ruido" class="flex flex-col items-center justify-center gap-2 p-2 rounded-xl bg-white/5 hover:bg-red-500/20 border border-transparent hover:border-red-500/30 transition-all group h-24" onclick="applyDegradation('ruido')">
                        <span class="material-symbols-outlined text-3xl text-slate-400 group-hover:text-red-400 group-hover:scale-110 transition-transform">graphic_eq</span>
                        <span class="text-xs font-bold text-slate-300 group-hover:text-white text-center leading-tight">Ruido</span>
                    </button>
                </div>
            </div>

            <!-- MONITOR CENTRAL (Status Integrado) -->
            <div class="glass-card px-6 py-4 rounded-2xl flex flex-col items-center justify-center mb-4 xl:mb-0 order-first xl:order-none w-full xl:w-auto shadow-[0_0_30px_rgba(0,0,0,0.2)] hover:!transform-none hover:!shadow-[0_0_30px_rgba(0,0,0,0.2)]">
                <span class="text-[10px] font-bold uppercase tracking-widest text-slate-400 mb-1">Integridad</span>
                <div class="flex items-center gap-3">
                    <div id="ocean-health" class="w-3 h-3 rounded-full bg-green-400 animate-pulse shadow-[0_0_10px_#4ade80]"></div>
                    <span id="ocean-status" class="text-xl font-black text-green-400 tracking-tight">100%</span>
                </div>
            </div>

            <!-- PANEL DERECHO: SOLUCIONES -->
            <div id="restoration-card" class="glass-card w-full max-w-2xl p-4 rounded-3xl group/panel transition-all duration-300 hover:!transform-none">
                <div class="flex items-center justify-between mb-3 border-b border-white/5 pb-2 px-2">
                    <div class="flex items-center gap-2">
                        <span class="material-symbols-outlined text-cyan-400">healing</span>
                        <h3 class="font-bold text-white leading-tight">Restauración</h3>
                    </div>
                    <span class="text-[10px] text-cyan-300/70 uppercase tracking-wider font-bold">Protocol</span>
                </div>
                
                <!-- Grid Horizontal de Botones -->
                <div class="grid grid-cols-3 sm:grid-cols-5 gap-2">
                    <!-- Botones compactos -->
                     <button id="btn-sol-limpieza" class="flex flex-col items-center justify-center gap-2 p-2 rounded-xl bg-white/5 hover:bg-cyan-500/20 border border-transparent hover:border-cyan-500/30 transition-all group h-24" onclick="applyRestoration('limpieza')">
                        <span class="material-symbols-outlined text-3xl text-slate-400 group-hover:text-cyan-400 group-hover:scale-110 transition-transform">cleaning_services</span>
                        <span class="text-xs font-bold text-slate-300 group-hover:text-white text-center leading-tight">Limpieza</span>
                    </button>
                    <button id="btn-sol-proteccion" class="flex flex-col items-center justify-center gap-2 p-2 rounded-xl bg-white/5 hover:bg-cyan-500/20 border border-transparent hover:border-cyan-500/30 transition-all group h-24" onclick="applyRestoration('proteccion')">
                        <span class="material-symbols-outlined text-3xl text-slate-400 group-hover:text-cyan-400 group-hover:scale-110 transition-transform">shield</span>
                        <span class="text-xs font-bold text-slate-300 group-hover:text-white text-center leading-tight">Protección</span>
                    </button>
                    <button id="btn-sol-sostenible" class="flex flex-col items-center justify-center gap-2 p-2 rounded-xl bg-white/5 hover:bg-cyan-500/20 border border-transparent hover:border-cyan-500/30 transition-all group h-24" onclick="applyRestoration('sostenible')">
                        <span class="material-symbols-outlined text-3xl text-slate-400 group-hover:text-cyan-400 group-hover:scale-110 transition-transform">eco</span>
                        <span class="text-xs font-bold text-slate-300 group-hover:text-white text-center leading-tight">Sostenible</span>
                    </button>
                    <button id="btn-sol-reforestacion" class="flex flex-col items-center justify-center gap-2 p-2 rounded-xl bg-white/5 hover:bg-cyan-500/20 border border-transparent hover:border-cyan-500/30 transition-all group h-24" onclick="applyRestoration('reforestacion')">
                        <span class="material-symbols-outlined text-3xl text-slate-400 group-hover:text-cyan-400 group-hover:scale-110 transition-transform">forest</span>
                        <span class="text-xs font-bold text-slate-300 group-hover:text-white text-center leading-tight">Filtración</span>
                    </button>
                    <button id="btn-sol-regulacion" class="flex flex-col items-center justify-center gap-2 p-2 rounded-xl bg-white/5 hover:bg-cyan-500/20 border border-transparent hover:border-cyan-500/30 transition-all group h-24" onclick="applyRestoration('regulacion')">
                        <span class="material-symbols-outlined text-3xl text-slate-400 group-hover:text-cyan-400 group-hover:scale-110 transition-transform">traffic</span>
                        <span class="text-xs font-bold text-slate-300 group-hover:text-white text-center leading-tight">Regulación</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Contenedor para las secciones inferiores (Scroll) -->
        <div class="max-w-7xl mx-auto px-6 pb-20">
            <div id="decision-simulator" class="mt-14 glass-card rounded-[2.5rem] p-4 md:p-10 relative overflow-hidden">
                <div id="decision-screen-tint" class="absolute inset-0 opacity-0 pointer-events-none transition-all duration-500"></div>
                <div class="relative z-10">
                    <div class="text-center mb-8">
                        <h2 class="text-4xl md:text-6xl font-black tracking-tight mt-3">El oceano depende de ti...</h2>
                        <p class="text-slate-200 mt-3 max-w-3xl mx-auto">
                            Responde 4 situaciones reales. Pasa el mouse o elige una opcion y observa su consecuencia ambiental.
                        </p>
                    </div>

                    <div class="mb-5 flex items-center justify-between gap-4">
                        <span id="decision-progress" class="inline-flex items-center px-4 py-2 rounded-full text-sm font-bold bg-white/10 border border-white/15 text-slate-100">Pregunta 1 de 4</span>
                        <div class="h-2 flex-1 bg-white/10 rounded-full overflow-hidden">
                            <div id="decision-progress-bar" class="h-full w-1/4 bg-gradient-to-r from-primary to-coral-glow transition-all duration-500"></div>
                        </div>
                    </div>

                    <div class="bg-black/25 border border-white/10 rounded-2xl p-5 mb-6">
                        <h3 id="decision-question-text" class="text-xl md:text-2xl font-bold text-white"></h3>
                    </div>

                    <div class="grid md:grid-cols-2 gap-6">
                        <button id="decision-option-a" class="decision-option text-left p-7 rounded-3xl border transition-all duration-300"></button>
                        <button id="decision-option-b" class="decision-option text-left p-7 rounded-3xl border transition-all duration-300"></button>
                    </div>

                    <div id="decision-feedback" class="mt-8 hidden p-6 rounded-2xl border border-white/15 bg-black/40 transition-all duration-500 ease-out opacity-0 translate-y-3">
                        <div class="flex items-start gap-3">
                            <span id="decision-icon" class="text-2xl leading-none">??</span>
                            <div>
                                <h4 id="decision-title" class="text-xl font-bold text-white mb-2"></h4>
                                <p id="decision-text" class="text-slate-200 leading-relaxed"></p>
                            </div>
                        </div>
                        <div id="decision-wave" class="mt-4 h-2 rounded-full bg-gradient-to-r from-transparent via-white/60 to-transparent opacity-0"></div>
                    </div>

                    <div class="mt-6 flex items-center justify-end gap-3">
                        <button id="decision-prev-btn" class="px-5 py-2 rounded-full border border-white/20 bg-white/5 text-slate-100 hover:bg-white/10 transition-all">Anterior</button>
                        <button id="decision-next-btn" class="px-5 py-2 rounded-full border border-primary/40 bg-primary/15 text-primary hover:bg-primary/25 transition-all">Siguiente</button>
                    </div>
                </div>
            </div>

            <div id="drag-decide-simulator" class="mt-14 glass-card rounded-[2.5rem] p-4 md:p-10 relative overflow-hidden">
                <div id="drag-decide-tint" class="absolute inset-0 opacity-0 pointer-events-none transition-all duration-500"></div>
                <div class="relative z-10">
                    <div class="text-center mb-8">
                        <h2 class="text-3xl md:text-5xl font-black tracking-tight">Arrastra y decide</h2>
                        <p class="text-slate-200 mt-3 max-w-3xl mx-auto">
                            Clasifica cada objeto según su impacto. Al soltarlo, verás una animación,
                            una explicación corta y cómo cambia el entorno marino.
                        </p>
                    </div>

                    <!-- Barra de Progreso y Puntuación -->
                    <div class="mb-8 bg-black/20 p-4 rounded-2xl border border-white/10">
                        <div class="flex justify-between items-center mb-2 text-sm">
                            <span class="font-bold text-slate-300">Progreso de Clasificación</span>
                            <span id="drag-progress-text" class="font-bold text-primary">0 / 10</span>
                        </div>
                        <div class="w-full bg-white/10 rounded-full h-2.5">
                            <div id="drag-progress-bar" class="bg-gradient-to-r from-primary to-cyan-400 h-2.5 rounded-full transition-all duration-500" style="width: 0%"></div>
                        </div>
                    </div>

                    <div id="floating-items" class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2 mb-8">
                        <!-- Carta 1 -->
                        <div id="item-bolsa-plastica" class="drag-item cursor-grab active:cursor-grabbing relative group w-full bg-slate-800 border-2 border-slate-600 rounded-xl shadow-lg transition-all hover:-translate-y-1 hover:shadow-xl hover:border-primary/50 flex flex-col overflow-hidden select-none" draggable="true" data-correct-zone="contamina" data-label="Bolsa plástica" data-explanation="Puede tardar décadas en degradarse y convertirse en fragmentos que dañan la fauna marina.">
                            <div class="card-img-container h-20 md:h-24 w-full bg-black/20 overflow-hidden relative">
                                <img src="https://commons.wikimedia.org/wiki/Special:FilePath/Plastic_bag_in_a_water_canal_and_a_cloudy_sky_in_the_background_(51148269478).jpg" alt="Bolsa plástica" class="w-full h-full object-cover">
                            </div>
                            <div class="card-text p-1.5 text-center bg-slate-900/90 flex-1 flex items-center justify-center">
                                <span class="text-[10px] md:text-xs font-bold text-slate-200 leading-tight">Bolsa plástica</span>
                            </div>
                        </div>
                        <!-- Carta 2 -->
                        <div id="item-lata" class="drag-item cursor-grab active:cursor-grabbing relative group w-full bg-slate-800 border-2 border-slate-600 rounded-xl shadow-lg transition-all hover:-translate-y-1 hover:shadow-xl hover:border-primary/50 flex flex-col overflow-hidden select-none" draggable="true" data-correct-zone="contamina" data-label="Lata" data-explanation="Cuando se desecha en zonas costeras puede liberar residuos y afectar la calidad del agua.">
                            <div class="card-img-container h-20 md:h-24 w-full bg-black/20 overflow-hidden relative">
                                <img src="https://commons.wikimedia.org/wiki/Special:FilePath/Aluminium_Can_Degrading_in_Environment.jpg" alt="Lata" class="w-full h-full object-cover">
                            </div>
                            <div class="card-text p-1.5 text-center bg-slate-900/90 flex-1 flex items-center justify-center">
                                <span class="text-[10px] md:text-xs font-bold text-slate-200 leading-tight">Lata</span>
                            </div>
                        </div>
                        <!-- Carta 3 -->
                        <div id="item-red" class="drag-item cursor-grab active:cursor-grabbing relative group w-full bg-slate-800 border-2 border-slate-600 rounded-xl shadow-lg transition-all hover:-translate-y-1 hover:shadow-xl hover:border-primary/50 flex flex-col overflow-hidden select-none" draggable="true" data-correct-zone="contamina" data-label="Red de pesca" data-explanation="Las redes abandonadas siguen atrapando especies y pueden romper hábitats como arrecifes.">
                            <div class="card-img-container h-20 md:h-24 w-full bg-black/20 overflow-hidden relative">
                                <img src="https://commons.wikimedia.org/wiki/Special:FilePath/Derelict_Fishing_Nets_(32651155722).jpg" alt="Red de pesca" class="w-full h-full object-cover">
                            </div>
                            <div class="card-text p-1.5 text-center bg-slate-900/90 flex-1 flex items-center justify-center">
                                <span class="text-[10px] md:text-xs font-bold text-slate-200 leading-tight">Red de pesca</span>
                            </div>
                        </div>
                        <!-- Carta 4 -->
                        <div id="item-bolsa-reutilizable" class="drag-item cursor-grab active:cursor-grabbing relative group w-full bg-slate-800 border-2 border-green-600/50 rounded-xl shadow-lg transition-all hover:-translate-y-1 hover:shadow-xl hover:border-green-400 flex flex-col overflow-hidden select-none" draggable="true" data-correct-zone="protege" data-label="Bolsa reutilizable" data-explanation="Sustituye bolsas de un solo uso y reduce residuos que podrían terminar en ríos y mares.">
                            <div class="card-img-container h-20 md:h-24 w-full bg-black/20 overflow-hidden relative">
                                <img src="https://commons.wikimedia.org/wiki/Special:FilePath/HK_PriceRite_Reusable_shopping_bags.JPG" alt="Bolsa reutilizable" class="w-full h-full object-cover">
                            </div>
                            <div class="card-text p-1.5 text-center bg-slate-900/90 flex-1 flex items-center justify-center">
                                <span class="text-[10px] md:text-xs font-bold text-slate-200 leading-tight">Bolsa reutilizable</span>
                            </div>
                        </div>
                        <!-- Carta 5 -->
                        <div id="item-botellas-reutilizables" class="drag-item cursor-grab active:cursor-grabbing relative group w-full bg-slate-800 border-2 border-green-600/50 rounded-xl shadow-lg transition-all hover:-translate-y-1 hover:shadow-xl hover:border-green-400 flex flex-col overflow-hidden select-none" draggable="true" data-correct-zone="protege" data-label="Botellas reutilizables" data-explanation="Reduce consumo de plástico desechable y disminuye el volumen de basura marina.">
                            <div class="card-img-container h-20 md:h-24 w-full bg-black/20 overflow-hidden relative">
                                <img src="https://commons.wikimedia.org/wiki/Special:FilePath/Multiple_reusable_water_bottles.jpg" alt="Botellas reutilizables" class="w-full h-full object-cover">
                            </div>
                            <div class="card-text p-1.5 text-center bg-slate-900/90 flex-1 flex items-center justify-center">
                                <span class="text-[10px] md:text-xs font-bold text-slate-200 leading-tight">Botellas reutilizables</span>
                            </div>
                        </div>
                        <!-- Carta 6 -->
                        <div id="item-reciclaje" class="drag-item cursor-grab active:cursor-grabbing relative group w-full bg-slate-800 border-2 border-green-600/50 rounded-xl shadow-lg transition-all hover:-translate-y-1 hover:shadow-xl hover:border-green-400 flex flex-col overflow-hidden select-none" draggable="true" data-correct-zone="protege" data-label="Reciclaje" data-explanation="Separar y reciclar residuos evita que muchos materiales lleguen a ríos y mares.">
                            <div class="card-img-container h-20 md:h-24 w-full bg-white/90 overflow-hidden relative p-2">
                                <img src="https://img.icons8.com/color/240/recycle-sign.png" alt="Reciclaje" class="w-full h-full object-contain">
                            </div>
                            <div class="card-text p-1.5 text-center bg-slate-900/90 flex-1 flex items-center justify-center">
                                <span class="text-[10px] md:text-xs font-bold text-slate-200 leading-tight">Reciclaje</span>
                            </div>
                        </div>
                        <!-- Carta 7 -->
                        <div id="item-colilla" class="drag-item cursor-grab active:cursor-grabbing relative group w-full bg-slate-800 border-2 border-slate-600 rounded-xl shadow-lg transition-all hover:-translate-y-1 hover:shadow-xl hover:border-primary/50 flex flex-col overflow-hidden select-none" draggable="true" data-correct-zone="contamina" data-label="Colilla de cigarro" data-explanation="Contiene químicos tóxicos que se liberan en el agua, dañando a pequeños organismos.">
                            <div class="card-img-container h-20 md:h-24 w-full bg-black/20 overflow-hidden relative">
                                <img src="https://fotografias-compromiso.atresmedia.com/clipping/cmsimages02/2017/06/06/F7C6331D-E37D-4574-AC84-9B2104F6B2A7/58.jpg" alt="Colilla" class="w-full h-full object-cover">
                            </div>
                            <div class="card-text p-1.5 text-center bg-slate-900/90 flex-1 flex items-center justify-center">
                                <span class="text-[10px] md:text-xs font-bold text-slate-200 leading-tight">Colilla</span>
                            </div>
                        </div>
                        <!-- Carta 8 -->
                        <div id="item-panel-solar" class="drag-item cursor-grab active:cursor-grabbing relative group w-full bg-slate-800 border-2 border-yellow-500/50 rounded-xl shadow-lg transition-all hover:-translate-y-1 hover:shadow-xl hover:border-yellow-400 flex flex-col overflow-hidden select-none" draggable="true" data-correct-zone="protege" data-label="Energía solar" data-explanation="Reduce la dependencia de combustibles fósiles, cuya combustión contribuye al calentamiento y acidificación del océano.">
                            <div class="card-img-container h-20 md:h-24 w-full bg-black/20 overflow-hidden relative">
                                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRIVu34UHSQco9ZQruIw72G7TZKe5eUEbHGoA&s" alt="Energía solar" class="w-full h-full object-cover">
                            </div>
                            <div class="card-text p-1.5 text-center bg-slate-900/90 flex-1 flex items-center justify-center">
                                <span class="text-[10px] md:text-xs font-bold text-slate-200 leading-tight">Energía solar</span>
                            </div>
                        </div>
                        <!-- Carta 9 -->
                        <div id="item-vidrio" class="drag-item cursor-grab active:cursor-grabbing relative group w-full bg-slate-800 border-2 border-slate-600 rounded-xl shadow-lg transition-all hover:-translate-y-1 hover:shadow-xl hover:border-primary/50 flex flex-col overflow-hidden select-none" draggable="true" data-correct-zone="contamina" data-label="Botella de vidrio" data-explanation="Aunque inerte, puede romperse en fragmentos peligrosos para la fauna y las personas. Tarda miles de años en degradarse.">
                            <div class="card-img-container h-20 md:h-24 w-full bg-black/20 overflow-hidden relative">
                                <img src="https://transerviceadg.com/cdn/shop/collections/glass-671963_1920_1200x1200.jpg?v=1605317735" alt="Botella de vidrio" class="w-full h-full object-cover">
                            </div>
                            <div class="card-text p-1.5 text-center bg-slate-900/90 flex-1 flex items-center justify-center">
                                <span class="text-[10px] md:text-xs font-bold text-slate-200 leading-tight">Botella de vidrio</span>
                            </div>
                        </div>
                        <!-- Carta 10 -->
                        <div id="item-turismo" class="drag-item cursor-grab active:cursor-grabbing relative group w-full bg-slate-800 border-2 border-yellow-500/50 rounded-xl shadow-lg transition-all hover:-translate-y-1 hover:shadow-xl hover:border-yellow-400 flex flex-col overflow-hidden select-none" draggable="true" data-correct-zone="protege" data-label="Turismo responsable" data-explanation="Implica no tocar ni dañar corales, no dejar basura y elegir operadores turísticos que respeten el medio ambiente.">
                            <div class="card-img-container h-20 md:h-24 w-full bg-black/20 overflow-hidden relative">
                                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQixGGLY7BvySBGmldWhIXYT7nMeQsI7KZMrA&s" alt="Turismo" class="w-full h-full object-cover">
                            </div>
                            <div class="card-text p-1.5 text-center bg-slate-900/90 flex-1 flex items-center justify-center">
                                <span class="text-[10px] md:text-xs font-bold text-slate-200 leading-tight">Turismo</span>
                            </div>
                        </div>
                    </div>

                    <div class="grid md:grid-cols-2 gap-6 mb-6">
                        <div id="drop-contamina" class="drop-zone min-h-[140px] md:min-h-[180px] bg-red-500/10 border-2 border-dashed border-red-400/50 rounded-3xl p-4 md:p-5">
                            <h3 class="text-xl font-bold text-red-300 mb-2 flex items-center gap-2">
                                <span class="material-symbols-outlined">dangerous</span> Contamina el océano
                            </h3>
                            <p class="text-sm text-slate-200 mb-3">Arrastra aquí los elementos que dañan ecosistemas marinos.</p>
                            <div class="drop-items flex flex-wrap gap-3"></div>
                        </div>
                        <div id="drop-protege" class="drop-zone min-h-[140px] md:min-h-[180px] bg-green-500/10 border-2 border-dashed border-green-400/50 rounded-3xl p-4 md:p-5">
                            <h3 class="text-xl font-bold text-green-300 mb-2 flex items-center gap-2">
                                <span class="material-symbols-outlined">health_and_safety</span> Protege el océano
                            </h3>
                            <p class="text-sm text-slate-200 mb-3">Arrastra aquí los elementos que ayudan a cuidar el mar.</p>
                            <div class="drop-items flex flex-wrap gap-3"></div>
                        </div>
                    </div>

                    <div id="drag-feedback" class="hidden p-6 rounded-2xl border border-white/15 bg-black/40 transition-all duration-500 ease-out opacity-0 translate-y-3">
                        <h4 id="drag-feedback-title" class="text-xl font-bold text-white mb-2"></h4>
                        <p id="drag-feedback-text" class="text-slate-200 leading-relaxed"></p>
                    </div>
                    <div class="text-center mt-6">
                        <button id="drag-reset-btn" class="px-6 py-3 rounded-full border border-primary text-primary font-bold hover:bg-primary hover:text-deep-abyss transition-all inline-flex items-center gap-2">
                            Reiniciar actividad
                            <span class="material-symbols-outlined text-lg">restart_alt</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div> <!-- Fin del contenedor de simulación (El filtro se aplica aquí) -->

    <!-- CONTENEDOR DE NOTIFICACIONES DE IMPACTO (Feedback Educativo) -->
    <div id="impact-feedback-container" class="fixed top-28 left-1/2 -translate-x-1/2 z-[9990] w-[90%] max-w-2xl pointer-events-none"></div>

    <!-- Botón Flotante de Reinicio (MOVIDO FUERA DEL CONTENEDOR PARA ARREGLAR POSICIÓN FIXED) -->
    <button id="floating-reset-btn" class="hidden fixed bottom-24 right-6 md:right-10 z-[9999] px-6 py-4 bg-primary text-deep-abyss font-bold rounded-full shadow-[0_0_30px_rgba(56,189,248,0.6)] hover:scale-110 transition-all items-center gap-3 border-4 border-white/20 cursor-pointer" onclick="window.resetEnvironment()">
        <span class="material-symbols-outlined text-3xl">restart_alt</span> <span class="hidden md:inline text-lg">Reiniciar Escenario</span>
    </button>`r`n
    <!-- Scripts -->
    <script src="../assets/js/interactive.js"></script>
    <script src="../assets/js/laboratorio.js"></script>
</body>
</html>
